#!/usr/bin/env php
<?php

require __DIR__ . '/../vendor/autoload.php';

if (function_exists('xdebug_disable')) {
    xdebug_disable();
}

use PhpParser\NodeTraverser;
use PhpParser\NodeVisitor\NameResolver;
use PhpParser\ParserFactory;
use PhpParser\PrettyPrinter\Standard;
use Symfony\Component\Console\Application;
use Symfony\Component\Finder\Finder;
use NamaeSpace\Command\FindCommand;
use NamaeSpace\Command\ReplaceCommand;

$parser = (new ParserFactory())->create(ParserFactory::PREFER_PHP5);
$traverser = new NodeTraverSer();
$traverser->addVisitor(new NameResolver());
$prettyPrinter = new Standard();
$finder = new Finder();

$app = new Application();
$app->add(new ReplaceCommand($parser, $traverser, $prettyPrinter, $finder));
$app->add(new FindCommand($parser, $traverser, $prettyPrinter, $finder));
$app->run();
